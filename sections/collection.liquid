{% comment %}
  Collection section
  Renders products from a collection, defaults to 'all' products if no specific collection is provided.
{% endcomment %}

<div class="container mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold text-center mb-8">
    {% if collection.title %}
      {{ collection.title }}
    {% else %}
      All Products
    {% endif %}
  </h1>

  {% if collection.products.size > 0 %}
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      {% for product in collection.products %}
        {% render 'product_single', product_card_product: product %}
      {% endfor %}
    </div>

    {% comment %} Basic Pagination {% endcomment %}
    {% if paginate.pages > 1 %}
      <nav role="navigation" class="mt-12 flex justify-center">
        <ul class="pagination flex items-center space-x-2">
          {% if paginate.previous %}
            <li>
              <a href="{{ paginate.previous.url }}" class="btn btn-outline">&laquo; Previous</a>
            </li>
          {% else %}
            <li>
              <span class="btn btn-outline btn-disabled">&laquo; Previous</span>
            </li>
          {% endif %}

          {% for part in paginate.parts %}
            {% if part.is_link %}
              <li>
                <a href="{{ part.url }}" class="btn btn-outline">{{ part.title }}</a>
              </li>
            {% else %}
              {% if part.title == paginate.current_page %}
                <li>
                  <span class="btn btn-primary">{{ part.title }}</span>
                </li>
              {% else %}
                <li>
                  <span class="btn btn-outline btn-disabled">{{ part.title }}</span>
                </li>
              {% endif %}
            {% endif %}
          {% endfor %}

          {% if paginate.next %}
            <li>
              <a href="{{ paginate.next.url }}" class="btn btn-outline">Next &raquo;</a>
            </li>
          {% else %}
            <li>
              <span class="btn btn-outline btn-disabled">Next &raquo;</span>
            </li>
          {% endif %}
        </ul>
      </nav>
    {% endif %}

  {% else %}
    <p class="text-center text-lg text-gray-500">No products found in this collection.</p>
  {% endif %}
</div>

{% schema %}
{
  "name": "Collection products",
  "settings": [
    {
      "type": "range",
      "id": "products_per_page",
      "min": 2,
      "max": 24,
      "step": 2,
      "label": "Products per page",
      "default": 12
    }
  ]
}
{% endschema %}
